# –§–æ—Ä–º—ã –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ ASP.NET Core MVC

---

## 1. –ß—Ç–æ —Ç–∞–∫–æ–µ —Ñ–æ—Ä–º–∞ –∏ –∑–∞—á–µ–º –æ–Ω–∞ –Ω—É–∂–Ω–∞

**–§–æ—Ä–º–∞** ‚Äî —ç—Ç–æ —Å–ø–æ—Å–æ–±, —Å –ø–æ–º–æ—â—å—é –∫–æ—Ç–æ—Ä–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä—É.
–ù–∞–ø—Ä–∏–º–µ—Ä: —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, –≤—Ö–æ–¥, –ø–æ–∏—Å–∫, —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ –∏–ª–∏ –æ—Ç–∑—ã–≤.
–§–æ—Ä–º–∞ ‚Äî —ç—Ç–æ ¬´–≤–æ—Ä–æ—Ç–∞¬ª, —á–µ—Ä–µ–∑ –∫–æ—Ç–æ—Ä—ã–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∏–∑ –±—Ä–∞—É–∑–µ—Ä–∞ –ø–æ–ø–∞–¥–∞–µ—Ç –≤ –≤–∞—à –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä.

```html
<form method="post" action="/Feedback/Send">
    <input type="text" name="UserName" placeholder="–í–∞—à–µ –∏–º—è" />
    <textarea name="Message" placeholder="–í–∞—à –æ—Ç–∑—ã–≤"></textarea>
    <button type="submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
</form>
```

–ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É **–û—Ç–ø—Ä–∞–≤–∏—Ç—å**, –±—Ä–∞—É–∑–µ—Ä —Å–æ–±–∏—Ä–∞–µ—Ç –≤—Å–µ –ø–æ–ª—è —Ñ–æ—Ä–º—ã –∏ –¥–µ–ª–∞–µ—Ç **HTTP‚Äë–∑–∞–ø—Ä–æ—Å** –Ω–∞ —Å–µ—Ä–≤–µ—Ä.
–¢–∏–ø –∑–∞–ø—Ä–æ—Å–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∞—Ç—Ä–∏–±—É—Ç–∞ `method` ‚Äî –æ–±—ã—á–Ω–æ —ç—Ç–æ `POST`.

---

## 2. –ö–∞–∫ —Ñ–æ—Ä–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ MVC

MVC‚Äë–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–µ–ª–∏—Ç –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞ –¥–≤–∞ —à–∞–≥–∞:

1. **GET‚Äë–∑–∞–ø—Ä–æ—Å** ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å —Ñ–æ—Ä–º—É.
   –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –ø—Ä–æ—Å—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å –ø—É—Å—Ç—ã–º–∏ –ø–æ–ª—è–º–∏.

2. **POST‚Äë–∑–∞–ø—Ä–æ—Å** ‚Äî –ø—Ä–∏–Ω—è—Ç—å –¥–∞–Ω–Ω—ã–µ.
   –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –ø–æ–ª—É—á–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ —Ñ–æ—Ä–º—ã –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ –±–∞–∑—É –∏–ª–∏ –≤—ã–≤–æ–¥–∏—Ç –Ω–∞ —ç–∫—Ä–∞–Ω).

–ü—Ä–∏–º–µ—Ä:

```csharp
public class FeedbackController : Controller
{
    [HttpGet]
    public IActionResult Index()
    {
        return View(); // –ø—Ä–æ—Å—Ç–æ –ø–æ–∫–∞–∑–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É
    }

    [HttpPost]
    public IActionResult Index(string userName, string message)
    {
        ViewData["Result"] = $"–°–ø–∞—Å–∏–±–æ, {userName}! –í–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ: {message}";
        return View(); // –ø–æ–∫–∞–∑–∞—Ç—å —Ç—É –∂–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º
    }
}
```

View `Views/Feedback/Index.cshtml`:

```cshtml
<h1>–û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å</h1>

<form method="post">
    <label>–ò–º—è:</label>
    <input type="text" name="userName" />

    <label>–°–æ–æ–±—â–µ–Ω–∏–µ:</label>
    <textarea name="message"></textarea>

    <button type="submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
</form>

@if (ViewData["Result"] != null)
{
    <p>@ViewData["Result"]</p>
}
```

üîπ **–í–∞–∂–Ω–æ:** –∏–º–µ–Ω–∞ –∞—Ç—Ä–∏–±—É—Ç–æ–≤ `name` –¥–æ–ª–∂–Ω—ã —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å –∏–º–µ–Ω–∞–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –º–µ—Ç–æ–¥–∞ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞.

---

## 3. Razor‚Äë—Ñ–æ—Ä–º—ã —Å Tag Helpers

–í MVC –º—ã —Ä–µ–¥–∫–æ –ø–∏—à–µ–º —Ñ–æ—Ä–º—ã –≤—Ä—É—á–Ω—É—é.
–ú—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º **Tag Helpers**, —á—Ç–æ–±—ã –Ω–µ –æ—à–∏–±–∞—Ç—å—Å—è —Å –∏–º–µ–Ω–∞–º–∏ –∏ –º–∞—Ä—à—Ä—É—Ç–∞–º–∏.

```cshtml
@model FeedbackModel

<form asp-action="Index" method="post">
    <label asp-for="UserName"></label>
    <input asp-for="UserName" class="form-control" />

    <label asp-for="Message"></label>
    <textarea asp-for="Message" class="form-control"></textarea>

    <button type="submit" class="btn btn-primary">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
</form>
```

–ú–æ–¥–µ–ª—å:

```csharp
public class FeedbackModel
{
    public string UserName { get; set; } = "";
    public string Message { get; set; } = "";
}
```

–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä:

```csharp
[HttpPost]
public IActionResult Index(FeedbackModel model)
{
    ViewData["Result"] = $"–°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç {model.UserName}: {model.Message}";
    return View();
}
```

üîπ `asp-for` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –∏–º—è –ø–æ–ª—è –∏ —Å–≤—è–∑—ã–≤–∞–µ—Ç –µ–≥–æ —Å–æ —Å–≤–æ–π—Å—Ç–≤–æ–º –º–æ–¥–µ–ª–∏.
üîπ `asp-action="Index"` —Å–æ–∑–¥–∞—ë—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç –∫ –º–µ—Ç–æ–¥—É –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞.

---

## 4. GET –∏ POST ‚Äî –¥–≤–µ —Å—Ç–æ—Ä–æ–Ω—ã —Ñ–æ—Ä–º—ã

| –ú–µ—Ç–æ–¥ | –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è | –ß—Ç–æ –¥–µ–ª–∞–µ—Ç |
|--------|--------------------|-------------|
| **GET** | –ö–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å —Ñ–æ—Ä–º—É –∏–ª–∏ —Ñ–∏–ª—å—Ç—Ä | –ù–µ –∏–∑–º–µ–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ, –±–µ–∑–æ–ø–∞—Å–µ–Ω |
| **POST** | –ö–æ–≥–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –ø–æ–ª—è | –ü–µ—Ä–µ–¥–∞—ë—Ç –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä |

–ü—Ä–∏–º–µ—Ä —Ñ–∏–ª—å—Ç—Ä–∞ —á–µ—Ä–µ–∑ GET:

```cshtml
<form asp-action="Search" method="get">
    <input type="text" name="q" value="@Context.Request.Query["q"]" />
    <button type="submit">–ü–æ–∏—Å–∫</button>
</form>
```

–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä:

```csharp
public IActionResult Search(string q)
{
    var result = _repo.Find(q);
    return View(result);
}
```

–í –∞–¥—Ä–µ—Å–Ω–æ–π —Å—Ç—Ä–æ–∫–µ –ø–æ—è–≤–∏—Ç—Å—è `/Search?q=—Ç–µ–∫—Å—Ç`, –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ –∑–∞–∫–ª–∞–¥–∫–∏.

---

## 5. –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç Model Binding (–ø—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏)

**Model Binding** ‚Äî —ç—Ç–æ –≤–æ–ª—à–µ–±–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å, –∫–æ–≥–¥–∞ ASP.NET –±–µ—Ä—ë—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ –∑–∞–ø—Ä–æ—Å–∞ –∏ –≤—Å—Ç–∞–≤–ª—è–µ—Ç –∏—Ö –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –º–µ—Ç–æ–¥–∞ –∏–ª–∏ —Å–≤–æ–π—Å—Ç–≤–∞ –º–æ–¥–µ–ª–∏.

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø–æ–ª–Ω–∏–ª —Ñ–æ—Ä–º—É –∏ –Ω–∞–∂–∞–ª ‚Äú–û—Ç–ø—Ä–∞–≤–∏—Ç—å‚Äù.
2. –°–µ—Ä–≤–µ—Ä –ø–æ–ª—É—á–∏–ª HTTP‚Äë–∑–∞–ø—Ä–æ—Å —Å —Ç–µ–ª–æ–º:
   ```
   UserName=–ê–Ω–Ω–∞&Message=–ü—Ä–∏–≤–µ—Ç
   ```
3. MVC –Ω–∞—Ö–æ–¥–∏—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –º–µ—Ç–æ–¥–∞ (`FeedbackModel model`) –∏ —Å–æ–∑–¥–∞—ë—Ç –æ–±—ä–µ–∫—Ç —ç—Ç–æ–≥–æ –∫–ª–∞—Å—Å–∞.
4. –ö–∞–∂–¥–æ–µ –ø–æ–ª–µ —Ñ–æ—Ä–º—ã (`UserName`, `Message`) –ø–æ–ø–∞–¥–∞–µ—Ç –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–µ —Å–≤–æ–π—Å—Ç–≤–æ.

üß† –¢–æ –µ—Å—Ç—å ASP.NET –¥–µ–ª–∞–µ—Ç –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫:

```csharp
var model = new FeedbackModel();
model.UserName = Request.Form["UserName"];
model.Message = Request.Form["Message"];
```

–ê –ø–æ—Ç–æ–º –ø–µ—Ä–µ–¥–∞—ë—Ç —ç—Ç–æ—Ç –≥–æ—Ç–æ–≤—ã–π –æ–±—ä–µ–∫—Ç –≤ –º–µ—Ç–æ–¥ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞.

---

## 6. –ü—Ä–æ—Å—Ç–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤—Ä—É—á–Ω—É—é

–î–æ —Ç–æ–≥–æ, –∫–∞–∫ –º—ã –¥–æ–π–¥—ë–º –¥–æ –∞—Ç—Ä–∏–±—É—Ç–æ–≤ –≤–∞–ª–∏–¥–∞—Ü–∏–∏, –º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –ø–æ–ª—è –≤—Ä—É—á–Ω—É—é:

```csharp
[HttpPost]
public IActionResult Index(FeedbackModel model)
{
    if (string.IsNullOrWhiteSpace(model.UserName))
    {
        ViewData["Error"] = "–í–≤–µ–¥–∏—Ç–µ –∏–º—è!";
        return View(model);
    }

    ViewData["Result"] = $"–°–ø–∞—Å–∏–±–æ, {model.UserName}!";
    return View();
}
```

View:

```cshtml
@if (ViewData["Error"] != null)
{
    <div class="text-danger">@ViewData["Error"]</div>
}
```

---

## 7. ViewData, ViewBag –∏ TempData ‚Äî –º–∏–Ω–∏‚Äë–ø–∞–º—è—Ç—å –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏

| –û–±—ä–µ–∫—Ç | –ì–¥–µ –∂–∏–≤—ë—Ç | –î–ª—è —á–µ–≥–æ –ø–æ–¥—Ö–æ–¥–∏—Ç |
|---------|------------|------------------|
| **ViewData** | –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –æ–¥–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ | –∫–æ—Ä–æ—Ç–∫–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è (–∑–∞–≥–æ–ª–æ–≤–∫–∏, —Å–æ–æ–±—â–µ–Ω–∏—è) |
| **ViewBag** | —Ç–æ –∂–µ, –Ω–æ —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–æ–º | –±—ã—Å—Ç—Ä–æ –∏ —É–¥–æ–±–Ω–æ |
| **TempData** | –∂–∏–≤—ë—Ç –æ–¥–∏–Ω —Ä–µ–¥–∏—Ä–µ–∫—Ç –≤–ø–µ—Ä—ë–¥ | —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ—Å–ª–µ POST ‚Üí Redirect |

–ü—Ä–∏–º–µ—Ä TempData:

```csharp
TempData["Success"] = "–°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ!";
return RedirectToAction("Index");
```

```cshtml
@if (TempData["Success"] != null)
{
    <p class="alert alert-success">@TempData["Success"]</p>
}
```

---

## 8. –ú–∏–Ω–∏‚Äë–ø—Ä–∏–º–µ—Ä: —Ñ–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

–ú–æ–¥–µ–ª—å:

```csharp
public class RegisterModel
{
    public string Login { get; set; } = "";
    public string Password { get; set; } = "";
}
```

–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä:

```csharp
[HttpGet]
public IActionResult Register() => View();

[HttpPost]
public IActionResult Register(RegisterModel model)
{
    if (model.Password.Length < 5)
    {
        ViewData["Error"] = "–ü–∞—Ä–æ–ª—å —Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∏–π";
        return View(model);
    }

    TempData["Success"] = $"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å {model.Login} –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω!";
    return RedirectToAction("Register");
}
```

View:

```cshtml
@model RegisterModel
<h2>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h2>

<form asp-action="Register" method="post">
    <div>
        <label asp-for="Login"></label>
        <input asp-for="Login" />
    </div>
    <div>
        <label asp-for="Password"></label>
        <input asp-for="Password" type="password" />
    </div>
    <button type="submit">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
</form>

@if (ViewData["Error"] != null)
{
    <div class="text-danger">@ViewData["Error"]</div>
}

@if (TempData["Success"] != null)
{
    <div class="text-success">@TempData["Success"]</div>
}
```

---

## 9. –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —à–∞–≥ –∑–∞ —à–∞–≥–æ–º

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–ª `/Register` ‚Üí –º–µ—Ç–æ–¥ `HttpGet` ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—É—Å—Ç—É—é —Ñ–æ—Ä–º—É.
2. –ó–∞–ø–æ–ª–Ω–∏–ª –∏ –Ω–∞–∂–∞–ª –∫–Ω–æ–ø–∫—É ‚Üí –±—Ä–∞—É–∑–µ—Ä —Å–¥–µ–ª–∞–ª `POST /Register`.
3. MVC —Å–æ–∑–¥–∞–ª `RegisterModel` –∏ –∑–∞–ø–æ–ª–Ω–∏–ª –ø–æ–ª—è –∏–∑ —Ñ–æ—Ä–º—ã.
4. –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –ø—Ä–æ–≤–µ—Ä–∏–ª –ø–∞—Ä–æ–ª—å ‚Üí –µ—Å–ª–∏ –∫–æ—Ä–æ—Ç–∫–∏–π, –ø–æ–∫–∞–∑–∞–ª –æ—à–∏–±–∫—É; –µ—Å–ª–∏ –Ω–æ—Ä–º ‚Äî —Å–æ—Ö—Ä–∞–Ω–∏–ª –∏ —Å–¥–µ–ª–∞–ª Redirect.
5. –ü–æ—Å–ª–µ Redirect —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –æ–±–Ω–æ–≤–∏–ª–∞—Å—å –∏ –≤—ã–≤–µ–ª–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏–∑ `TempData`.

---

## 10. –ü–æ–ª–µ–∑–Ω—ã–µ —Å–æ–≤–µ—Ç—ã

- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `asp-for`, `asp-action`, `asp-controller` ‚Äî –º–µ–Ω—å—à–µ –æ–ø–µ—á–∞—Ç–æ–∫.
- –ò–º–µ–Ω–∞ —Å–≤–æ–π—Å—Ç–≤ –º–æ–¥–µ–ª–∏ –¥–æ–ª–∂–Ω—ã —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å –∏–º–µ–Ω–∞–º–∏ –ø–æ–ª–µ–π.
- GET ‚Äî –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è, POST ‚Äî –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö.
- –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ POST –¥–µ–ª–∞–π—Ç–µ Redirect, —á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏.
- –î–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `TempData`.

---

## 11. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏ `ModelState.IsValid`

–ö–æ–≥–¥–∞ —Ñ–æ—Ä–º–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä, ASP.NET –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—ã—Ç–∞–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å –æ–±—ä–µ–∫—Ç –º–æ–¥–µ–ª–∏ –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤—Å–µ –ø–æ–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ.
–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –æ–±—ä–µ–∫—Ç–µ **`ModelState`**.

```csharp
if (!ModelState.IsValid)
{
    // –ï—Å—Ç—å –æ—à–∏–±–∫–∏
    return View(model);
}
```

–ï—Å–ª–∏ –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ—à–ª–∏ ‚Äî `ModelState.IsValid == true`.

---

## 12. –í–∞–ª–∏–¥–∞—Ü–∏—è —á–µ—Ä–µ–∑ –∞—Ç—Ä–∏–±—É—Ç—ã

–í–º–µ—Å—Ç–æ —Ä—É—á–Ω—ã—Ö `if` –º–æ–∂–Ω–æ –ø–æ–º–µ—á–∞—Ç—å –ø–æ–ª—è –º–æ–¥–µ–ª–∏ –∞—Ç—Ä–∏–±—É—Ç–∞–º–∏.
ASP.NET —Å–∞–º –ø—Ä–æ–≤–µ—Ä–∏—Ç –∏—Ö –∏ –¥–æ–±–∞–≤–∏—Ç –æ—à–∏–±–∫–∏ –≤ `ModelState`.

```csharp
public class RegisterModel
{
    [Required(ErrorMessage = "–í–≤–µ–¥–∏—Ç–µ –ª–æ–≥–∏–Ω")]
    [StringLength(50, MinimumLength = 3, ErrorMessage = "–õ–æ–≥–∏–Ω –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ—Ç 3 –¥–æ 50 —Å–∏–º–≤–æ–ª–æ–≤")]
    public string Login { get; set; } = "";

    [Required(ErrorMessage = "–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å")]
    [StringLength(100, MinimumLength = 6, ErrorMessage = "–ú–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤")]
    public string Password { get; set; } = "";

    [Required]
    [EmailAddress(ErrorMessage = "–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π Email")]
    public string Email { get; set; } = "";
}
```

–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä:

```csharp
[HttpPost]
[ValidateAntiForgeryToken]
public IActionResult Register(RegisterModel model)
{
    if (!ModelState.IsValid)
    {
        // –û—à–∏–±–∫–∏ –±—É–¥—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–∫–∞–∑–∞–Ω—ã –≤ View
        return View(model);
    }

    TempData["Success"] = $"–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ –¥–ª—è {model.Login}";
    return RedirectToAction("Register");
}
```

---

## 13. –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ –≤–æ View

–í Razor –¥–æ—Å—Ç—É–ø–Ω—ã —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ Tag Helpers –¥–ª—è –æ—à–∏–±–æ–∫.

```cshtml
@model RegisterModel
<h2>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h2>

<form asp-action="Register" method="post">
    <div asp-validation-summary="ModelOnly" class="text-danger"></div>

    <div>
        <label asp-for="Login"></label>
        <input asp-for="Login" />
        <span asp-validation-for="Login" class="text-danger"></span>
    </div>

    <div>
        <label asp-for="Password"></label>
        <input asp-for="Password" type="password" />
        <span asp-validation-for="Password" class="text-danger"></span>
    </div>

    <div>
        <label asp-for="Email"></label>
        <input asp-for="Email" />
        <span asp-validation-for="Email" class="text-danger"></span>
    </div>

    <button type="submit">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
</form>
```

üí° `asp-validation-summary="ModelOnly"` ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –æ–±—â–∏—Ö –æ—à–∏–±–æ–∫.
üí° `asp-validation-for` ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—è.

---

## 14. –ö–∞–∫ ASP.NET –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –º–æ–¥–µ–ª—å –≤–Ω—É—Ç—Ä–∏

1. –§—Ä–µ–π–º–≤–æ—Ä–∫ —Å–æ–∑–¥–∞—ë—Ç –æ–±—ä–µ–∫—Ç –º–æ–¥–µ–ª–∏.
2. –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–≤–æ–π—Å—Ç–≤–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç –≤—Å–µ –∞—Ç—Ä–∏–±—É—Ç—ã (`[Required]`, `[Range]` –∏ —Ç.–¥.).
3. –ï—Å–ª–∏ —É—Å–ª–æ–≤–∏–µ –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ ‚Äî –¥–æ–±–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ –≤ `ModelState`.
4. –ü–æ—Å–ª–µ –≤—Å–µ—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è —Å–≤–æ–π—Å—Ç–≤–æ `ModelState.IsValid`.

–ï—Å–ª–∏ —Ö–æ—Ç—å –æ–¥–Ω–∞ –æ—à–∏–±–∫–∞ –µ—Å—Ç—å ‚Äî –∑–Ω–∞—á–µ–Ω–∏–µ –±—É–¥–µ—Ç `false`.

```csharp
if (!ModelState.IsValid)
{
    return View(model);
}
```

---

## 15. –ö–∞–∫ –≤–µ—Ä–Ω—É—Ç—å —Ñ–æ—Ä–º—É —Å –æ—à–∏–±–∫–∞–º–∏

–ï—Å–ª–∏ —Ñ–æ—Ä–º–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –æ—à–∏–±–∫–∏, –≤–∞–∂–Ω–æ **–≤–µ—Ä–Ω—É—Ç—å —Ç—É –∂–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å –º–æ–¥–µ–ª—å—é**, —á—Ç–æ–±—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–≤–∏–¥–µ–ª —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ –∏ –ø–æ–¥—Å–≤–µ—Ç–∫—É –æ—à–∏–±–æ–∫.

```csharp
if (!ModelState.IsValid)
{
    return View(model);
}
```

–ï—Å–ª–∏ –ø—Ä–æ—Å—Ç–æ —Å–¥–µ–ª–∞—Ç—å `return View();` ‚Äî –ø–æ–ª—è –æ—á–∏—Å—Ç—è—Ç—Å—è, –∏ —á–µ–ª–æ–≤–µ–∫ –ø–æ—Ç–µ—Ä—è–µ—Ç –≤–≤–µ–¥—ë–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.

### 15.1 –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –º–æ–¥–µ–ª—è–º–∏

–ò–Ω–æ–≥–¥–∞ –æ–¥–∏–Ω –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ä–∞–∑–Ω—ã–µ —Ñ–æ—Ä–º—ã ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–Ω–∏–≥–∏ –∏ –∞–≤—Ç–æ—Ä–æ–≤.

```csharp
public class LibraryController : Controller
{
    [HttpGet]
    public IActionResult AddBook() => View();

    [HttpPost]
    public IActionResult AddBook(BookCreateModel model)
    {
        if (!ModelState.IsValid)
            return View(model);

        TempData["Success"] = $"–ö–Ω–∏–≥–∞ '{model.Title}' –¥–æ–±–∞–≤–ª–µ–Ω–∞!";
        return RedirectToAction("AddBook");
    }

    [HttpGet]
    public IActionResult AddAuthor() => View();

    [HttpPost]
    public IActionResult AddAuthor(AuthorCreateModel model)
    {
        if (!ModelState.IsValid)
            return View(model);

        TempData["Success"] = $"–ê–≤—Ç–æ—Ä '{model.Name}' –¥–æ–±–∞–≤–ª–µ–Ω!";
        return RedirectToAction("AddAuthor");
    }
}
```

üìò –û–¥–∏–Ω –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å —Ä–∞–∑–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏ –º–æ–¥–µ–ª–µ–π ‚Äî
–≥–ª–∞–≤–Ω–æ–µ, —á—Ç–æ–±—ã —É –∫–∞–∂–¥–æ–π —Ñ–æ—Ä–º—ã –±—ã–ª —Å–≤–æ–π –º–µ—Ç–æ–¥ –∏ –º–∞—Ä—à—Ä—É—Ç.

### 15.2 –§–æ—Ä–º—ã —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —É–¥–∞–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ —Å—Ç—Ä–æ—è—Ç—Å—è –ø–æ —Ç–æ–º—É –∂–µ –ø—Ä–∏–Ω—Ü–∏–ø—É, —á—Ç–æ –∏ —Å–æ–∑–¥–∞–Ω–∏–µ.

```csharp
[HttpGet]
public IActionResult Edit(int id)
{
    var book = _repo.GetById(id);
    return View(book);
}

[HttpPost]
public IActionResult Edit(BookCreateModel model)
{
    if (!ModelState.IsValid)
        return View(model);

    _repo.Update(model);
    TempData["Success"] = "–ö–Ω–∏–≥–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∞";
    return RedirectToAction("Index");
}

[HttpPost]
public IActionResult Delete(int id)
{
    _repo.Delete(id);
    TempData["Success"] = "–ö–Ω–∏–≥–∞ —É–¥–∞–ª–µ–Ω–∞";
    return RedirectToAction("Index");
}
```

üí° –î–ª—è —É–¥–∞–ª–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `form method="post"`
–∏ `[ValidateAntiForgeryToken]` –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç CSRF.

---

## 16. –ü—Ä–∏–º–µ—Ä: —Ñ–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–Ω–∏–≥–∏

–ú–æ–¥–µ–ª—å:

```csharp
public class BookCreateModel
{
    [Required(ErrorMessage = "–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–Ω–∏–≥–∏")]
    public string Title { get; set; } = "";

    [Required(ErrorMessage = "–í–≤–µ–¥–∏—Ç–µ –∞–≤—Ç–æ—Ä–∞")]
    public string Author { get; set; } = "";

    [Range(1800, 2100, ErrorMessage = "–ì–æ–¥ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ—Ç 1800 –¥–æ 2100")]
    public int Year { get; set; }

    [Required]
    [Range(1, 9999)]
    public decimal Price { get; set; }
}
```

–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä:

```csharp
public class BooksController : Controller
{
    [HttpGet]
    public IActionResult Create() => View();

    [HttpPost]
    [ValidateAntiForgeryToken]
    public IActionResult Create(BookCreateModel model)
    {
        if (!ModelState.IsValid)
        {
            return View(model);
        }

        TempData["Success"] = $"–ö–Ω–∏–≥–∞ '{model.Title}' –¥–æ–±–∞–≤–ª–µ–Ω–∞!";
        return RedirectToAction("Create");
    }
}
```

View `Create.cshtml`:

```cshtml
@model BookCreateModel
@{
    ViewData["Title"] = "–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–∏–≥–∏";
}

<h2>@ViewData["Title"]</h2>

<form asp-action="Create" method="post">
    <div asp-validation-summary="ModelOnly" class="text-danger"></div>

    <div>
        <label asp-for="Title"></label>
        <input asp-for="Title" />
        <span asp-validation-for="Title" class="text-danger"></span>
    </div>

    <div>
        <label asp-for="Author"></label>
        <input asp-for="Author" />
        <span asp-validation-for="Author" class="text-danger"></span>
    </div>

    <div>
        <label asp-for="Year"></label>
        <input asp-for="Year" />
        <span asp-validation-for="Year" class="text-danger"></span>
    </div>

    <div>
        <label asp-for="Price"></label>
        <input asp-for="Price" />
        <span asp-validation-for="Price" class="text-danger"></span>
    </div>

    <button type="submit">–î–æ–±–∞–≤–∏—Ç—å</button>
</form>

@if (TempData["Success"] != null)
{
    <div class="alert alert-success">@TempData["Success"]</div>
}
```

---

## 17. Redirect –ø–æ—Å–ª–µ POST

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–æ—Ä–º—ã —Å–ª–µ–¥—É–µ—Ç –¥–µ–ª–∞—Ç—å Redirect, —á—Ç–æ–±—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –æ—Ç–ø—Ä–∞–≤–∏–ª –µ—ë –ø–æ–≤—Ç–æ—Ä–Ω–æ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã.

```csharp
return RedirectToAction("Create");
```

–≠—Ç–æ—Ç –ø–æ–¥—Ö–æ–¥ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è **PRG‚Äë–ø–∞—Ç—Ç–µ—Ä–Ω** ‚Äî Post ‚Üí Redirect ‚Üí Get.
–û–Ω –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö.

---

## 18. –ê–Ω—Ç–∏‚Äë—Ñ—Ä–æ–¥ –∑–∞—â–∏—Ç–∞ (`ValidateAntiForgeryToken`)

–ö–∞–∂–¥–∞—è —Ñ–æ—Ä–º–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–æ–ª–∂–Ω–∞ —Å–æ–¥–µ—Ä–∂–∞—Ç—å **—Ç–æ–∫–µ–Ω –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏**, —á—Ç–æ–±—ã –∑–∞—â–∏—Ç–∏—Ç—å—Å—è –æ—Ç –ø–æ–¥–¥–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤.

–í Razor —ç—Ç–æ –¥–µ–ª–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `<form asp‚Äëaction="..." method="post">`.
ASP.NET –≤—Å—Ç–∞–≤–∏—Ç —Å–∫—Ä—ã—Ç–æ–µ –ø–æ–ª–µ:

```html
<input name="__RequestVerificationToken" type="hidden" value="..." />
```

–ï—Å–ª–∏ –≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ —É–∫–∞–∑–∞–Ω `[ValidateAntiForgeryToken]`, —Å–µ—Ä–≤–µ—Ä –ø—Ä–æ–≤–µ—Ä–∏—Ç, —á—Ç–æ –∑–∞–ø—Ä–æ—Å –ø—Ä–∏—à—ë–ª —Å —ç—Ç–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –∞ –Ω–µ —Å —á—É–∂–æ–≥–æ —Å–∞–π—Ç–∞.

---

## 19. –ü–µ—Ä–µ–¥–∞—á–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –æ–± –æ—à–∏–±–∫–∞—Ö –∏ —É—Å–ø–µ—Ö–µ

| –°–ø–æ—Å–æ–± | –ì–¥–µ –∂–∏–≤—ë—Ç | –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è |
|---------|------------|---------------|
| `ViewData` | –û–¥–∏–Ω –∑–∞–ø—Ä–æ—Å | –ú–µ–ª–∫–∏–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏ |
| `TempData` | –û–¥–∏–Ω Redirect –≤–ø–µ—Ä—ë–¥ | –°–æ–æ–±—â–µ–Ω–∏—è –ø–æ—Å–ª–µ POST |
| `ModelState` | –¢–æ–ª—å–∫–æ –¥–ª—è –æ—à–∏–±–æ–∫ | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è |

```csharp
TempData["Success"] = "–ö–Ω–∏–≥–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞!";
ViewData["Hint"] = "–ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –µ—â—ë –æ–¥–Ω—É.";
```

---

## 20. –°–æ–≤–µ—Ç—ã –ø–æ —Å—Ç–∏–ª—é Razor‚Äë—Ñ–æ—Ä–º

1. –£ –∫–∞–∂–¥–æ–π —Ñ–æ—Ä–º—ã –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–≤–æ–π –º–µ—Ç–æ–¥ `[HttpPost]`.
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `@model` –¥–ª—è —Ç–∏–ø–∏–∑–∞—Ü–∏–∏.
3. –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ø–æ–ª—è –≤—Ä—É—á–Ω—É—é ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞—Ç—Ä–∏–±—É—Ç—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏.
4. –í–æ–∑–≤—Ä–∞—â–∞–π—Ç–µ `View(model)`, –µ—Å–ª–∏ `ModelState` –Ω–µ–≤–∞–ª–∏–¥–µ–Ω.
5. –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–µ–ª–∞–π—Ç–µ Redirect.
6. –î–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –¥–æ–±–∞–≤–ª—è–π—Ç–µ `[ValidateAntiForgeryToken]`.
7. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `asp-validation-for` –¥–ª—è –ø–æ–¥—Å–≤–µ—Ç–∫–∏ –æ—à–∏–±–æ–∫.
8. –û—Å—Ç–∞–≤–ª—è–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –µ–≥–æ –≤–≤–µ–¥—ë–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö.

---

## 21. –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ —á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—ã

–ò–Ω–æ–≥–¥–∞ –Ω—É–∂–Ω–æ, —á—Ç–æ–±—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–≥—Ä—É–∑–∏–ª –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ, –¥–æ–∫—É–º–µ–Ω—Ç –∏–ª–∏ –¥—Ä—É–≥–æ–π —Ñ–∞–π–ª.
ASP.NET MVC –¥–µ–ª–∞–µ—Ç —ç—Ç–æ –æ—á–µ–Ω—å –ø—Ä–æ—Å—Ç–æ —Å –ø–æ–º–æ—â—å—é —Ç–∏–ø–∞ `IFormFile`.

–ú–æ–¥–µ–ª—å:

```csharp
public class UploadModel
{
    [Required]
    public IFormFile? Photo { get; set; }
}
```

–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä:

```csharp
public class UploadController : Controller
{
    private readonly IWebHostEnvironment _env;

    public UploadController(IWebHostEnvironment env)
    {
        _env = env;
    }

    [HttpGet]
    public IActionResult Index() => View();

    [HttpPost]
    [ValidateAntiForgeryToken]
    public IActionResult Index(UploadModel model)
    {
        if (!ModelState.IsValid || model.Photo == null)
        {
            ViewData["Error"] = "–§–∞–π–ª –Ω–µ –≤—ã–±—Ä–∞–Ω";
            return View();
        }

        var uploads = Path.Combine(_env.WebRootPath, "uploads");
        Directory.CreateDirectory(uploads);

        var filePath = Path.Combine(uploads, model.Photo.FileName);
        using (var stream = new FileStream(filePath, FileMode.Create))
        {
            model.Photo.CopyTo(stream);
        }

        TempData["Success"] = "–§–∞–π–ª —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω!";
        return RedirectToAction("Index");
    }
}
```

View `Index.cshtml`:

```cshtml
@model UploadModel

<h2>–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞</h2>

<form asp-action="Index" method="post" enctype="multipart/form-data">
    <div>
        <label asp-for="Photo"></label>
        <input asp-for="Photo" type="file" />
        <span asp-validation-for="Photo" class="text-danger"></span>
    </div>
    <button type="submit">–ó–∞–≥—Ä—É–∑–∏—Ç—å</button>
</form>

@if (TempData["Success"] != null)
{
    <p class="alert alert-success">@TempData["Success"]</p>
}
@if (ViewData["Error"] != null)
{
    <p class="text-danger">@ViewData["Error"]</p>
}
```

üí° –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–æ–±–∞–≤–ª—è–π—Ç–µ `enctype="multipart/form-data"` ‚Äî –∏–Ω–∞—á–µ —Ñ–∞–π–ª –Ω–µ –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω.


### 21.1 –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤

–ß—Ç–æ–±—ã –∑–∞–≥—Ä—É–∑–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ–∞–π–ª–æ–≤, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `List<IFormFile>`
–∏ –¥–æ–±–∞–≤—å—Ç–µ –∞—Ç—Ä–∏–±—É—Ç `multiple` –≤ –ø–æ–ª–µ –≤–≤–æ–¥–∞.

```csharp
public class UploadMultipleModel
{
    [Required]
    public List<IFormFile> Files { get; set; } = new();
}
```

View:

```cshtml
@model UploadMultipleModel

<form asp-action="Upload" method="post" enctype="multipart/form-data">
    <input asp-for="Files" type="file" multiple />
    <button type="submit">–ó–∞–≥—Ä—É–∑–∏—Ç—å</button>
</form>
```

–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä:

```csharp
[HttpPost]
[ValidateAntiForgeryToken]
public IActionResult Upload(UploadMultipleModel model)
{
    foreach (var file in model.Files)
    {
        var path = Path.Combine(_env.WebRootPath, "uploads", file.FileName);
        using var stream = new FileStream(path, FileMode.Create);
        file.CopyTo(stream);
    }

    TempData["Success"] = $"{model.Files.Count} —Ñ–∞–π–ª–æ–≤ –∑–∞–≥—Ä—É–∂–µ–Ω–æ!";
    return RedirectToAction("Index");
}
```

---

## 22. –ß–∞—Å—Ç–∏—á–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è (Partial Views)

**–ß–∞—Å—Ç–∏—á–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ** ‚Äî —ç—Ç–æ –∫–∞–∫ –º–∏–Ω–∏-—à–∞–±–ª–æ–Ω Razor, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –≤—Å—Ç–∞–≤–∏—Ç—å –≤ —Ä–∞–∑–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã.
–ù–∞–ø—Ä–∏–º–µ—Ä, —Ñ–æ—Ä–º–∞ –ª–æ–≥–∏–Ω–∞, –±–ª–æ–∫ –ø—Ä–æ—Ñ–∏–ª—è, –∫–∞—Ä—Ç–æ—á–∫–∞ —Ç–æ–≤–∞—Ä–∞.

–§–∞–π–ª: `Views/Shared/_FeedbackForm.cshtml`

```cshtml
@model FeedbackModel

<form asp-controller="Feedback" asp-action="Send" method="post">
    <label asp-for="UserName"></label>
    <input asp-for="UserName" />
    <label asp-for="Message"></label>
    <textarea asp-for="Message"></textarea>
    <button type="submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
</form>
```

–í—Å—Ç–∞–≤–ª—è–µ–º —á–∞—Å—Ç–∏—á–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –ª—é–±—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É:

```cshtml
@await Html.PartialAsync("_FeedbackForm", new FeedbackModel())
```

–∏–ª–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ —Å –ª–æ–≥–∏–∫–æ–π (ViewComponent):

```cshtml
<vc:feedback-form></vc:feedback-form>
```

üìò –ß–∞—Å—Ç–∏—á–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –ø–æ–º–æ–≥–∞—é—Ç **–∏–∑–±–µ–≥–∞—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è** –∫–æ–¥–∞ –∏ –¥–µ–ª–∞—é—Ç Razor‚Äë—Å—Ç—Ä–∞–Ω–∏—Ü—ã —á–∏—â–µ.

### 22.1 –ö–∞–∫ MVC –∏—â–µ—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è

MVC –∏—â–µ—Ç `.cshtml`-—Ñ–∞–π–ª—ã –ø–æ —à–∞–±–ª–æ–Ω—É:

```
Views/{–ò–º—è–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞}/{–ò–º—è–î–µ–π—Å—Ç–≤–∏—è}.cshtml
Views/Shared/{–ò–º—è–î–µ–π—Å—Ç–≤–∏—è}.cshtml
```

–ï—Å–ª–∏ –Ω—É–∂–Ω—ã–π —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –ø–∞–ø–∫–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ ‚Äî
MVC –∏—â–µ—Ç –µ–≥–æ –≤ `Views/Shared/`.

–ü–æ—ç—Ç–æ–º—É –æ–±—â–∏–µ –±–ª–æ–∫–∏ (`_Form.cshtml`, `_Card.cshtml`, `_Header.cshtml`)
–ø—Ä–∏–Ω—è—Ç–æ —Ö—Ä–∞–Ω–∏—Ç—å –∏–º–µ–Ω–Ω–æ —Ç–∞–º.

---

## 23. –°–ª–æ–∂–Ω—ã–µ —Ñ–æ—Ä–º—ã —Å –≤–ª–æ–∂–µ–Ω–Ω—ã–º–∏ –º–æ–¥–µ–ª—è–º–∏

–ò–Ω–æ–≥–¥–∞ —É —Ñ–æ—Ä–º—ã –µ—Å—Ç—å –¥–æ—á–µ—Ä–Ω–∏–µ –æ–±—ä–µ–∫—Ç—ã. –ù–∞–ø—Ä–∏–º–µ—Ä, –∑–∞–∫–∞–∑ –∏ —Å–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤.

```csharp
public class OrderModel
{
    public string Customer { get; set; } = "";
    public List<OrderItemModel> Items { get; set; } = new();
}

public class OrderItemModel
{
    public string Product { get; set; } = "";
    public int Quantity { get; set; }
}
```

View:

```cshtml
@model OrderModel

<form asp-action="CreateOrder" method="post">
    <label asp-for="Customer"></label>
    <input asp-for="Customer" />

    <h3>–¢–æ–≤–∞—Ä—ã:</h3>
    @for (int i = 0; i < Model.Items.Count; i++)
    {
        <div>
            <input asp-for="Items[i].Product" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ" />
            <input asp-for="Items[i].Quantity" placeholder="–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ" />
        </div>
    }
    <button type="submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–∫–∞–∑</button>
</form>
```

MVC –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–≤—è–∑—ã–≤–∞–µ—Ç –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –ø–æ –∏–Ω–¥–µ–∫—Å–∞–º `Items[0].Product`, `Items[1].Product` –∏ —Ç.–¥.

### 22.1 –°–ª–æ–∂–Ω—ã–µ –º–æ–¥–µ–ª–∏ —Å–æ —Å–ø–∏—Å–∫–∞–º–∏

–ß–∞—Å—Ç–æ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –≤ —Ñ–æ—Ä–º—É –Ω–µ —Ç–æ–ª—å–∫–æ –¥–∞–Ω–Ω—ã–µ, –Ω–æ –∏ –≤—ã–ø–∞–¥–∞—é—â–∏–µ —Å–ø–∏—Å–∫–∏.
–î–ª—è —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç `ViewModel` —Å –∫–æ–ª–ª–µ–∫—Ü–∏–µ–π `SelectListItem`.

```csharp
public class ProductViewModel
{
    public string Name { get; set; } = "";
    public decimal Price { get; set; }
    public int CategoryId { get; set; }

    public List<SelectListItem> Categories { get; set; } = new();
}
```

–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä:

```csharp
public IActionResult Create()
{
    var vm = new ProductViewModel
    {
        Categories = _catalog.GetCategorySelectList()
    };
    return View(vm);
}
```

View:

```cshtml
@model ProductViewModel

<form asp-action="Create" method="post">
    <label asp-for="Name"></label>
    <input asp-for="Name" />
    <label asp-for="Price"></label>
    <input asp-for="Price" />
    <select asp-for="CategoryId" asp-items="Model.Categories"></select>
    <button type="submit">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
</form>
```

---

## 24. –û—à–∏–±–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –¥–µ–ª–∞—é—Ç –ø–æ—á—Ç–∏ –≤—Å–µ

| –û—à–∏–±–∫–∞ | –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç | –ö–∞–∫ –∏—Å–ø—Ä–∞–≤–∏—Ç—å |
|---------|----------------|---------------|
| –ù–µ —É–∫–∞–∑–∞–ª–∏ `[HttpPost]` | –ú–µ—Ç–æ–¥ –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è | –î–æ–±–∞–≤–∏—Ç—å `[HttpPost]` |
| –ü–æ–ª—è –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç —Å –∏–º–µ–Ω–∞–º–∏ —Å–≤–æ–π—Å—Ç–≤ | `Model` –ø—É—Å—Ç–∞—è | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `asp-for` |
| –ù–µ —É–∫–∞–∑–∞–ª–∏ `enctype="multipart/form-data"` | –§–∞–π–ª—ã –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è | –î–æ–±–∞–≤–∏—Ç—å –∞—Ç—Ä–∏–±—É—Ç |
| –ù–µ –¥–æ–±–∞–≤–∏–ª–∏ `[ValidateAntiForgeryToken]` | –û—à–∏–±–∫–∞ 400 (Invalid token) | –î–æ–±–∞–≤–∏—Ç—å –∞—Ç—Ä–∏–±—É—Ç |
| –ù–µ —Å–¥–µ–ª–∞–ª–∏ Redirect –ø–æ—Å–ª–µ POST | –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å PRG‚Äë–ø–∞—Ç—Ç–µ—Ä–Ω |
| –í–æ–∑–≤—Ä–∞—Ç–∏–ª–∏ `View()` –±–µ–∑ `model` –ø—Ä–∏ –æ—à–∏–±–∫–µ | –ü–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö —Ñ–æ—Ä–º—ã | –í–æ–∑–≤—Ä–∞—â–∞—Ç—å `View(model)` |
| –ó–∞–±—ã–ª–∏ `asp-validation-for` | –û—à–∏–±–∫–∏ –Ω–µ –≤–∏–¥–Ω—ã | –î–æ–±–∞–≤–∏—Ç—å —Ç–µ–≥–∏ –≤ –ø–æ–ª—è |

---

## 25. –ö–∞–∫ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ä–º—ã –≤–Ω—É—Ç—Ä–∏ MVC

–ü–æ—à–∞–≥–æ–≤–æ –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º:

1. –ë—Ä–∞—É–∑–µ—Ä –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å (GET –∏–ª–∏ POST).
2. Middleware –ø–µ—Ä–µ–¥–∞—ë—Ç –∑–∞–ø—Ä–æ—Å –≤ MVC.
3. –†–æ—É—Ç–∏–Ω–≥ –Ω–∞—Ö–æ–¥–∏—Ç –Ω—É–∂–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –∏ –º–µ—Ç–æ–¥.
4. Model Binder —á–∏—Ç–∞–µ—Ç `Request.Form`, —Å–æ–∑–¥–∞—ë—Ç –æ–±—ä–µ–∫—Ç –º–æ–¥–µ–ª–∏ –∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç —Å–≤–æ–π—Å—Ç–≤–∞.
5. DataAnnotations –ø—Ä–æ–≤–µ—Ä—è—é—Ç –≤–∞–ª–∏–¥–∞—Ü–∏—é.
6. –ï—Å–ª–∏ –≤—Å—ë –æ–∫ ‚Üí –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –º–µ—Ç–æ–¥ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞.
7. –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `View()` –∏–ª–∏ –¥–µ–ª–∞–µ—Ç `RedirectToAction()`.
8. –†–µ–∑—É–ª—å—Ç–∞—Ç —Å–µ—Ä–∏–∞–ª–∏–∑—É–µ—Ç—Å—è –≤ HTML –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –æ–±—Ä–∞—Ç–Ω–æ –≤ –±—Ä–∞—É–∑–µ—Ä.

---

## 26. –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏ —Å–æ–æ–±—â–µ–Ω–∏–π

–ò–Ω–æ–≥–¥–∞ –ø–æ–ª–µ–∑–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å—Ç–∞—Ç—É—Å –æ–ø–µ—Ä–∞—Ü–∏–∏.

```cshtml
@if (TempData["Success"] != null)
{
    <div class="alert alert-success">@TempData["Success"]</div>
}
@if (TempData["Error"] != null)
{
    <div class="alert alert-danger">@TempData["Error"]</div>
}
```

–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä:

```csharp
TempData["Success"] = "–û–ø–µ—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!";
TempData["Error"] = "–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –¥–∞–Ω–Ω—ã—Ö!";
```

---

## 27. –°–æ–≤–µ—Ç—ã –ø–æ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞

- –ö–∞–∂–¥–æ–π –º–æ–¥–µ–ª–∏ ‚Äî —Å–≤–æ–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –∏ –ø–∞–ø–∫–∞ View.
- –í—Å–µ –æ–±—â–∏–µ Razor‚Äë—Ñ–∞–π–ª—ã –¥–µ—Ä–∂–∏—Ç–µ –≤ `Views/Shared`.
- –õ–æ–≥–∏–∫—É —Ä–∞–±–æ—Ç—ã (–≤–∞–ª–∏–¥–∞—Ü–∏—é, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –±–∞–∑—É) –≤—ã–Ω–æ—Å–∏—Ç–µ –≤ —Å–µ—Ä–≤–∏—Å—ã.
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `ViewModels` ‚Äî –Ω–µ –ø–µ—Ä–µ–¥–∞–≤–∞–π—Ç–µ –Ω–∞–ø—Ä—è–º—É—é —Å—É—â–Ω–æ—Å—Ç–∏ –±–∞–∑—ã.
- –ù–µ –¥—É–±–ª–∏—Ä—É–π—Ç–µ —Ñ–æ—Ä–º—ã ‚Äî —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ —á–∞—Å—Ç–∏—á–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è.

---

## 28. –¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏ –Ω–æ–≤–∏—á–∫–æ–≤ (–µ—â—ë —Ä–∞–∑, –∫—Ä–∞—Ç–∫–æ)

- –ó–∞–±—ã–ª–∏ `[HttpPost]` –∏–ª–∏ `[ValidateAntiForgeryToken]`.
- –ù–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç –∏–º–µ–Ω–∞ –≤ `name` –∏ —Å–≤–æ–π—Å—Ç–≤–∞ –º–æ–¥–µ–ª–∏.
- –í–æ–∑–≤—Ä–∞—Ç `View()` –±–µ–∑ `model` —Å—Ç–∏—Ä–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ.
- –ù–µ –¥–æ–±–∞–≤–∏–ª–∏ `asp-validation-for` ‚Äî –æ—à–∏–±–∫–∏ –Ω–µ –≤–∏–¥–Ω—ã.
- –ù–µ —Å–¥–µ–ª–∞–ª–∏ Redirect –ø–æ—Å–ª–µ POST ‚Äî —Ñ–æ—Ä–º–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ø–æ–≤—Ç–æ—Ä–Ω–æ.
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç `ViewBag` –≤–º–µ—Å—Ç–æ —Å—Ç—Ä–æ–≥–∏—Ö –º–æ–¥–µ–ª–µ–π.
- –ü–∏—à—É—Ç –ª–æ–≥–∏–∫—É —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä—è–º–æ –≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ, –∞ –Ω–µ –≤ —Å–µ—Ä–≤–∏—Å–µ.

