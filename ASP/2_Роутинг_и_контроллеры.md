# –†–æ—É—Ç–∏–Ω–≥ –∏ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –≤ ASP.NET Core (Web API)

------------------------------------------------------------------------

### 1. –ß—Ç–æ —Ç–∞–∫–æ–µ —Ä–æ—É—Ç–∏–Ω–≥

**–†–æ—É—Ç–∏–Ω–≥** - —ç—Ç–æ –º–µ—Ö–∞–Ω–∏–∑–º, –∫–æ—Ç–æ—Ä—ã–π —Ä–µ—à–∞–µ—Ç, –∫–∞–∫–æ–π –º–µ—Ç–æ–¥ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –¥–æ–ª–∂–µ–Ω –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å HTTP-–∑–∞–ø—Ä–æ—Å –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞.

–ö–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å, –Ω–∞–ø—Ä–∏–º–µ—Ä:

    GET /api/users/5

–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –º–µ—Ç–æ–¥–æ–º –≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ.
ASP.NET Core –¥–µ–ª–∞–µ—Ç —ç—Ç–æ —Å –ø–æ–º–æ—â—å—é **Endpoint Routing** - —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏.

üìò –ü—Ä–æ—â–µ –≥–æ–≤–æ—Ä—è:
> –†–æ—É—Ç–∏–Ω–≥ - —ç—Ç–æ –∫–∞—Ä—Ç–∞, –ø–æ –∫–æ—Ç–æ—Ä–æ–π ASP.NET –Ω–∞—Ö–æ–¥–∏—Ç, –∫–∞–∫–æ–π –∫—É—Å–æ—á–µ–∫ –∫–æ–¥–∞ –¥–æ–ª–∂–µ–Ω –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∞–¥—Ä–µ—Å.

------------------------------------------------------------------------

### 2. –ö–∞–∫ ASP.NET Core –Ω–∞—Ö–æ–¥–∏—Ç –Ω—É–∂–Ω—ã–π –º–µ—Ç–æ–¥

–ö–æ–≥–¥–∞ —Å–µ—Ä–≤–µ—Ä –ø–æ–ª—É—á–∞–µ—Ç –∑–∞–ø—Ä–æ—Å, –æ–Ω –≤—ã–ø–æ–ª–Ω—è–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —à–∞–≥–æ–≤:

1. –°—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –ø—É—Ç—å –∑–∞–ø—Ä–æ—Å–∞ —Å –º–∞—Ä—à—Ä—É—Ç–∞–º–∏, –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–º–∏ –∞—Ç—Ä–∏–±—É—Ç–∞–º–∏ –≤ –∫–æ–¥–µ.
2. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–∏–ø HTTP-–∑–∞–ø—Ä–æ—Å–∞ (`GET`, `POST`, `PUT`, `DELETE` –∏ —Ç.–¥.).
3. –ò–∑–≤–ª–µ–∫–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏–∑ URL (route), query-—Å—Ç—Ä–æ–∫–∏, –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –∏–ª–∏ —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞.
4. –í—ã–∑—ã–≤–∞–µ—Ç –ø–æ–¥—Ö–æ–¥—è—â–∏–π –º–µ—Ç–æ–¥ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –∏ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç HTTP-–æ—Ç–≤–µ—Ç.

–ü—Ä–∏–º–µ—Ä:

```csharp
[ApiController]
[Route("api/[controller]")]
public class UsersController : ControllerBase
{
    [HttpGet("{id}")]
    public IActionResult GetById(int id)
    {
        return Ok($"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å ID: {id}");
    }
}
```

–ó–∞–ø—Ä–æ—Å:

    GET /api/users/10

–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:
- `api` - —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —á–∞—Å—Ç—å –º–∞—Ä—à—Ä—É—Ç–∞.
- `[controller]` –∑–∞–º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ –∏–º—è –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ **–±–µ–∑** —Å—É—Ñ—Ñ–∏–∫—Å–∞ `Controller`: `UsersController` ‚Üí `users`.
- `{id}` - –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è —á–∞—Å—Ç—å –º–∞—Ä—à—Ä—É—Ç–∞ (–ø–∞—Ä–∞–º–µ—Ç—Ä), –∑–Ω–∞—á–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –≤ –∞—Ä–≥—É–º–µ–Ω—Ç –º–µ—Ç–æ–¥–∞.

------------------------------------------------------------------------

### 3. –¢–æ–∫–µ–Ω [controller]: –∫–∞–∫ –æ–Ω –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –∏ –∫–æ–≥–¥–∞ –ª—É—á—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

–¢–æ–∫–µ–Ω `[controller]` - —É–¥–æ–±–Ω–æ–µ —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ: –æ–Ω –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç **–∏–º—è –∫–ª–∞—Å—Å–∞ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –±–µ–∑ —Å—É—Ñ—Ñ–∏–∫—Å–∞ `Controller`**.

–ü—Ä–∏–º–µ—Ä—ã –∑–∞–º–µ–Ω—ã —Ç–æ–∫–µ–Ω–∞:

–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä|–ë–∞–∑–æ–≤—ã–π –º–∞—Ä—à—Ä—É—Ç —Å `[controller]`|–†–µ–∞–ª—å–Ω—ã–π –ø—É—Ç—å
-------------------------------|-------------------------------|-------------------------------
`UsersController`|`[Route("api/[controller]")]`|`/api/users`
`UserProfilesController`|`[Route("api/[controller]")]`|`/api/userprofiles`
`BooksAdminController`|`[Route("api/[controller]")]`|`/api/booksadmin`

–ü–æ—á–µ–º—É –∏–Ω–æ–≥–¥–∞ **–ª—É—á—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å** `[controller]`:
- –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –∫–ª–∞—Å—Å–∞ –∏–∑–º–µ–Ω–∏—Ç URL –∏ –º–æ–∂–µ—Ç —Å–ª–æ–º–∞—Ç—å –∫–ª–∏–µ–Ω—Ç–æ–≤.
- –°–ª–æ–∂–Ω—ã–µ –∏–º–µ–Ω–∞ –∫–ª–∞—Å—Å–æ–≤ –¥–∞—é—Ç –Ω–µ—É–¥–æ–±–Ω—ã–µ –ø—É—Ç–∏ (`/api/userprofiles` –≤–º–µ—Å—Ç–æ `/api/user-profiles`).
- –î–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ –∏ —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏ —á–∞—â–µ –∑–∞–¥–∞—é—Ç —è–≤–Ω—ã–π –±–∞–∑–æ–≤—ã–π –º–∞—Ä—à—Ä—É—Ç:
  ```csharp
  [Route("api/users")]           // –≤–º–µ—Å—Ç–æ api/[controller]
  [Route("api/user-profiles")]   // —á–µ–ª–æ–≤–µ–∫–æ—á–∏—Ç–∞–µ–º—ã–π –ø—É—Ç—å
  ```

–°–æ–≤–µ—Ç: –¥–ª—è —É—á–µ–±–Ω—ã—Ö –ø—Ä–∏–º–µ—Ä–æ–≤ —Ç–æ–∫–µ–Ω —É–¥–æ–±–µ–Ω. –î–ª—è —Ä–µ–∞–ª—å–Ω—ã—Ö API –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —è–≤–Ω—ã–µ –±–∞–∑–æ–≤—ã–µ –ø—É—Ç–∏.

------------------------------------------------------------------------

### 4. –ê—Ç—Ä–∏–±—É—Ç—ã –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ (Attribute Routing)

–ú–∞—Ä—à—Ä—É—Ç—ã –∑–∞–¥–∞—é—Ç—Å—è –∞—Ç—Ä–∏–±—É—Ç–∞–º–∏ –Ω–∞–¥ –∫–ª–∞—Å—Å–æ–º –∏ –º–µ—Ç–æ–¥–∞–º–∏ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞.

–ê—Ç—Ä–∏–±—É—Ç|–ü—Ä–∏–º–µ—Ä|–û–ø–∏—Å–∞–Ω–∏–µ
------------------------------- |------------------------------- |-----------------------------------
`[Route("api/users")]`|`[Route("api/users")]`|–ë–∞–∑–æ–≤—ã–π –ø—É—Ç—å –∫–æ –≤—Å–µ–º –º–µ—Ç–æ–¥–∞–º –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞
`[HttpGet]`|`[HttpGet]`|–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç GET-–∑–∞–ø—Ä–æ—Å—ã –∫ –±–∞–∑–æ–≤–æ–º—É –ø—É—Ç–∏
`[HttpGet("{id}")]`|`[HttpGet("{id}")]`|GET –∫ `/api/users/{id}`
`[HttpPost]`|`[HttpPost]`|–°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞ (POST –∫ –±–∞–∑–æ–≤–æ–º—É –ø—É—Ç–∏)
`[HttpPut("{id}")]`|`[HttpPut("{id}")]`|–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞ –ø–æ ID
`[HttpDelete("{id}")]`|`[HttpDelete("{id}")]`|–£–¥–∞–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞ –ø–æ ID
`[HttpGet("search")]`|`[HttpGet("search")]`|–î–æ—á–µ—Ä–Ω–∏–π –ø—É—Ç—å: `/api/users/search`

–ü—Ä–∏–º–µ—Ä:

```csharp
[ApiController]
[Route("api/users")]
public class UsersController : ControllerBase
{
    [HttpGet]
    public IActionResult GetAll()
    {
        return Ok(new[] { "Anna", "Pavel", "Elena" });
    }

    [HttpGet("{id}")]
    public IActionResult GetById(int id)
    {
        return Ok($"User #{id}");
    }

    [HttpPost]
    public IActionResult Create([FromBody] string name)
    {
        return Created("api/users/1", $"Created '{name}'");
    }
}
```

------------------------------------------------------------------------

### 5. –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –º–∞—Ä—à—Ä—É—Ç–æ–≤

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –º–∞—Ä—à—Ä—É—Ç–æ–≤ –ø–æ–∑–≤–æ–ª—è—é—Ç –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –ø—Ä—è–º–æ –≤ URL.\
–û–Ω–∏ –∑–∞–¥–∞—é—Ç—Å—è –≤ —Ñ–∏–≥—É—Ä–Ω—ã—Ö —Å–∫–æ–±–∫–∞—Ö `{}` –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–ø–æ—Å—Ç–∞–≤–ª—è—é—Ç—Å—è —Å
–∞—Ä–≥—É–º–µ–Ω—Ç–∞–º–∏ –º–µ—Ç–æ–¥–∞.

``` csharp
[HttpGet("{id}")]
public IActionResult GetBook(int id)
{
    return Ok($"–ö–Ω–∏–≥–∞ ‚Ññ{id}");
}
```

–ó–∞–ø—Ä–æ—Å:

    GET /api/books/5

–û—Ç–≤–µ—Ç:

    –ö–Ω–∏–≥–∞ ‚Ññ5

üìò –ï—Å–ª–∏ –∏–º—è –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –≤ –º–∞—Ä—à—Ä—É—Ç–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –∏–º–µ–Ω–µ–º –∞—Ä–≥—É–º–µ–Ω—Ç–∞ –º–µ—Ç–æ–¥–∞,\
ASP.NET –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ.

------------------------------------------------------------------------

#### –ù–µ—Å–∫–æ–ª—å–∫–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

``` csharp
[HttpGet("{category}/{id}")]
public IActionResult GetBook(string category, int id)
{
    return Ok($"–ö–∞—Ç–µ–≥–æ—Ä–∏—è: {category}, ID: {id}");
}
```

–ó–∞–ø—Ä–æ—Å:

    GET /api/books/fantasy/3

–û—Ç–≤–µ—Ç:

    –ö–∞—Ç–µ–≥–æ—Ä–∏—è: fantasy, ID: 3

------------------------------------------------------------------------

#### –ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

``` csharp
[HttpGet("{id?}")]
public IActionResult GetBook(int? id)
{
    if (id.HasValue)
    {
        return Ok($"–ö–Ω–∏–≥–∞ {id}");
    }
    else
    {
        return Ok("–°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∫–Ω–∏–≥");
    }
}
```

–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å `/api/books` –∏–ª–∏ `/api/books/10` --- –æ–±–∞ –º–∞—Ä—à—Ä—É—Ç–∞
–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã.

------------------------------------------------------------------------

#### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º

``` csharp
[HttpGet("{lang=ru}")]
public IActionResult GetBooksByLang(string lang)
{
    return Ok($"–í—ã–±—Ä–∞–Ω —è–∑—ã–∫: {lang}");
}
```

–ó–∞–ø—Ä–æ—Å `/api/books` –≤–µ—Ä–Ω—ë—Ç `–í—ã–±—Ä–∞–Ω —è–∑—ã–∫: ru`,\
–∞ `/api/books/en` --- `–í—ã–±—Ä–∞–Ω —è–∑—ã–∫: en`.

------------------------------------------------------------------------

### 6. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –º–∞—Ä—à—Ä—É—Ç–æ–≤ (Route Constraints)

–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–æ–±–∞–≤–ª—è—é—Ç –ø—Ä–∞–≤–∏–ª–∞ –∫ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º. –ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ø—Ä–∞–≤–∏–ª—É, –±—É–¥–µ—Ç `404 Not Found`.

–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ|–ü—Ä–∏–º–µ—Ä|–û–ø–∏—Å–∞–Ω–∏–µ
------------------------------- |------------------------------- |-----------------------------------
`int`|`[HttpGet("{id:int}")]`|–¢–æ–ª—å–∫–æ —Ü–µ–ª—ã–µ —á–∏—Å–ª–∞
`long`|`[HttpGet("{id:long}")]`|–î–ª–∏–Ω–Ω—ã–µ —Ü–µ–ª—ã–µ
`bool`|`[HttpGet("{flag:bool}")]`|`true`/`false`
`guid`|`[HttpGet("{id:guid}")]`|–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä GUID
`datetime`|`[HttpGet("{date:datetime}")]`|–î–∞—Ç–∞/–≤—Ä–µ–º—è
`decimal`|`[HttpGet("{price:decimal}")]`|–î–µ—Å—è—Ç–∏—á–Ω—ã–µ —á–∏—Å–ª–∞
`double`|`[HttpGet("{x:double}")]`|–ß–∏—Å–ª–∞ —Å –ø–ª–∞–≤–∞—é—â–µ–π —Ç–æ—á–∫–æ–π
`float`|`[HttpGet("{x:float}")]`|–ß–∏—Å–ª–∞ —Å –ø–ª–∞–≤–∞—é—â–µ–π —Ç–æ—á–∫–æ–π
`min(x)`|`[HttpGet("{id:min(1)}")]`|–ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
`max(x)`|`[HttpGet("{id:max(100)}")]`|–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
`range(a,b)`|`[HttpGet("{id:range(1,100)}")]`|–î–∏–∞–ø–∞–∑–æ–Ω –∑–Ω–∞—á–µ–Ω–∏–π
`length(n)`|`[HttpGet("{code:length(6)}")]`|–§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –¥–ª–∏–Ω–∞ —Å—Ç—Ä–æ–∫–∏
`length(a,b)`|`[HttpGet("{code:length(3,10)}")]`|–î–ª–∏–Ω–∞ –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ
`alpha`|`[HttpGet("{name:alpha}")]`|–¢–æ–ª—å–∫–æ –±—É–∫–≤—ã
`regex(...)`|`[HttpGet("{code:regex(^[A-Z]{2}[0-9]{3}$)}")]`|–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ —Ä–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ

–ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π:

```csharp
[HttpGet("{id:int}")]
public IActionResult GetById(int id)
{
    return Ok($"–¶–µ–ª–æ–µ —á–∏—Å–ª–æ: {id}");
}

[HttpGet("{code:length(2,5)}")]
public IActionResult GetByCode(string code)
{
    return Ok($"–ö–æ–¥: {code}");
}

[HttpGet("{id:min(1):max(100)}")]
public IActionResult GetByRange(int id)
{
    return Ok($"–ß–∏—Å–ª–æ –æ—Ç 1 –¥–æ 100: {id}");
}
```

------------------------------------------------------------------------

### 7. –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Ä–∞–∑–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ (Model Binding)

ASP.NET Core –ø—Ä–∏–≤—è–∑—ã–≤–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è –∫ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º –º–µ—Ç–æ–¥–∞ –∏–∑ —Ä–∞–∑–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤. –° `[ApiController]` –¥–µ–π—Å—Ç–≤—É—é—Ç –ø—Ä–∞–≤–∏–ª–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:
- **–ü—Ä–æ—Å—Ç—ã–µ —Ç–∏–ø—ã** (int, string, bool) - –∏–∑ **–º–∞—Ä—à—Ä—É—Ç–∞** –∏ **query**.
- **–°–ª–æ–∂–Ω—ã–µ —Ç–∏–ø—ã** (–∫–ª–∞—Å—Å—ã/DTO) - –∏–∑ **—Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞** (JSON).
- –ú–æ–∂–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫ –∞—Ç—Ä–∏–±—É—Ç–æ–º.

–ê—Ç—Ä–∏–±—É—Ç|–ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö|–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞
------------------------------- |------------------------------- |-----------------------------------
`[FromRoute]`|–°–µ–≥–º–µ–Ω—Ç –ø—É—Ç–∏|`/api/users/5`
`[FromQuery]`|–°—Ç—Ä–æ–∫–∞ –∑–∞–ø—Ä–æ—Å–∞|`/api/users/search?name=Ivan&page=2`
`[FromBody]`|–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ (JSON)|`POST /api/users` —Å JSON
`[FromHeader]`|–ó–∞–≥–æ–ª–æ–≤–æ–∫|`X-Token: abc123`
`[FromForm]`|–¢–µ–ª–æ –∫–∞–∫ `form-data`|–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ä–º –∏ —Ñ–∞–π–ª–æ–≤

–ü—Ä–∏–º–µ—Ä—ã:

```csharp
[HttpGet("{id}")]
public IActionResult ByRoute([FromRoute] int id)
{
    return Ok(new { id = id });
}

[HttpGet("search")]
public IActionResult ByQuery([FromQuery] string name, [FromQuery] int page = 1)
{
    return Ok(new { name = name, page = page });
}

[HttpPost]
public IActionResult FromBody([FromBody] CreateUserDto dto)
{
    return Created("api/users/42", dto);
}

[HttpGet("secure")]
public IActionResult FromHeader([FromHeader(Name = "X-Token")] string token)
{
    return Ok(new { token = token });
}
```

------------------------------------------------------------------------

### 8. –í–æ–∑–≤—Ä–∞—Ç –¥–∞–Ω–Ω—ã—Ö: `IActionResult` vs `ActionResult<T>`

–ü–æ–¥—Ö–æ–¥|–ß—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç|–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
------------------------------- |------------------------------- |-----------------------------------
`IActionResult`|–¢–æ–ª—å–∫–æ —Å—Ç–∞—Ç—É—Å/–æ—Ç–≤–µ—Ç|–ö–æ–≥–¥–∞ —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö –º–æ–∂–µ—Ç —Ä–∞–∑–ª–∏—á–∞—Ç—å—Å—è (Ok/BadRequest/NotFound)
`ActionResult<T>`|–°—Ç–∞—Ç—É—Å + –¥–∞–Ω–Ω—ã–µ —Ç–∏–ø–∞ `T`|–ö–æ–≥–¥–∞ –æ–±—ã—á–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–∏–ø (–Ω–∞–ø—Ä–∏–º–µ—Ä, `UserDto`)

–ü—Ä–∏–º–µ—Ä `ActionResult<T>`:

```csharp
[HttpGet("{id}")]
public ActionResult<UserDto> Get(int id)
{
    if (id <= 0)
    {
        return BadRequest("ID –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–º");
    }

    var user = new UserDto { Id = id, Name = "Anna" };
    return Ok(user); // –ú–æ–∂–Ω–æ —Ç–∞–∫–∂–µ –ø—Ä–æ—Å—Ç–æ 'return user;' –¥–ª—è 200 OK
}
```

ASP.NET –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏: - —Å–µ—Ä–∏–∞–ª–∏–∑—É–µ—Ç –æ–±—ä–µ–∫—Ç `UserDto` –≤ JSON; -
–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–¥ —Å–æ—Å—Ç–æ—è–Ω–∏—è `200 OK`; - –ø—Ä–∏ `BadRequest()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 400
–±–µ–∑ –¥–∞–Ω–Ω—ã—Ö.

üìò `ActionResult<T>` —É–¥–æ–±–µ–Ω –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API (–Ω–∞–ø—Ä–∏–º–µ—Ä,
Swagger),\
—Ç–∞–∫ –∫–∞–∫ —è–≤–Ω–æ —É–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è.

------------------------------------------------------------------------

### 9. –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤ (best practices)

–¶–µ–ª—å - —á—Ç–æ–±—ã API –±—ã–ª **–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–º**, **—á–∏—Ç–∞–µ–º—ã–º** –∏ **—Å—Ç–∞–±–∏–ª—å–Ω—ã–º**.

–ü—Ä–∞–≤–∏–ª–æ|–•–æ—Ä–æ—à–æ|–ü–ª–æ—Ö–æ|–ü–æ—á–µ–º—É
------------------------------- |------------------------------- |------------------------------- |-------------------------------
–†–µ—Å—É—Ä—Å—ã - —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ|`/api/users`|`/api/getUsers`|–ú–∞—Ä—à—Ä—É—Ç—ã –æ–ø–∏—Å—ã–≤–∞—é—Ç **—á—Ç–æ**, –∞ –Ω–µ **—á—Ç–æ –¥–µ–ª–∞—Ç—å**
–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ —á–∏—Å–ª–æ|`/api/books`|`/api/book`|–†–∞–±–æ—Ç–∞–µ–º —Å –∫–æ–ª–ª–µ–∫—Ü–∏—è–º–∏ –∏ —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏
–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –≤ –ø—É—Ç–∏|`/api/books/10`|`/api/books?id=10`|–≠—Ç–æ **–∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ä–µ—Å—É—Ä—Å** (RESTful)
–ü–æ–¥—Ä–µ—Å—É—Ä—Å—ã - –ø–æ–¥–ø—É—Ç–∏|`/api/orders/10/items`|`/api/orderItems?orderId=10`|–ò–µ—Ä–∞—Ä—Ö–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤ –≤–∏–¥–Ω–∞ –≤ URL
–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è/—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ - query|`/api/books?author=Rowling&sort=title`|`/api/books/byAuthor/Rowling`|Query –ª—É—á—à–µ –æ—Ç—Ä–∞–∂–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞
–°—Ç–∏–ª—å URL - kebab-case|`/api/user-profiles`|`/api/UserProfiles`|–ï–¥–∏–Ω—ã–π –Ω–µ–π—Ç—Ä–∞–ª—å–Ω—ã–π —Å—Ç–∏–ª—å
–í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ|`/api/v1/users` (–∏–ª–∏ –∑–∞–≥–æ–ª–æ–≤–∫–∏)|`/api/users_v1`|–Ø–≤–Ω–∞—è –≤–µ—Ä—Å–∏—è –æ–±–ª–µ–≥—á–∞–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É
–°—Ç–∞–±–∏–ª—å–Ω—ã–µ –±–∞–∑–æ–≤—ã–µ –ø—É—Ç–∏|`[Route("api/users")]`|`[Route("api/[controller]")]`|–ù–µ –∑–∞–≤–∏—Å—è—Ç –æ—Ç –∏–º–µ–Ω–∏ –∫–ª–∞—Å—Å–∞

------------------------------------------------------------------------

### 10. –í–æ–∑–≤—Ä–∞—Ç –æ—à–∏–±–æ–∫ –∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–π

–û—à–∏–±–∫–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å **–ø–æ–Ω—è—Ç–Ω—ã–º–∏** –∏ **–∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–º–∏**.

#### 10.1 –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã

```csharp
[HttpGet("{id}")]
public IActionResult GetSafe(int id)
{
    if (id <= 0)
    {
        return BadRequest("ID –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –±–æ–ª—å—à–µ –Ω—É–ª—è");
    }

    var user = FindUser(id);
    if (user == null)
    {
        return NotFound(new { error = "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω" });
    }

    return Ok(user);
}
```

#### 10.2 Problem Details (RFC 7807)

ASP.NET Core –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –µ–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—à–∏–±–æ–∫ `ProblemDetails`:

```csharp
[HttpGet("fail")]
public IActionResult Fail()
{
    return Problem(
        title: "–û–±—â–∞—è –æ—à–∏–±–∫–∞",
        detail: "–ß—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫",
        statusCode: 500);
}
```

–ü—Ä–∏ `[ApiController]` –≤–∞–ª–∏–¥–∞—Ü–∏–æ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –∫–∞–∫ `ValidationProblemDetails` —Å –∫–æ–¥–æ–º `400`.

#### 10.3 –û–±—â–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ—à–∏–±–∫–∞–º

- –í–æ–∑–≤—Ä–∞—â–∞–π—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –∫–æ–¥—ã (`400`, `404`, `409`, `422`, `500`).
- –°–æ–æ–±—â–µ–Ω–∏—è - –±–µ–∑ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –¥–µ—Ç–∞–ª–µ–π (–±–µ–∑ stack trace).
- –î–ª—è –∏—Å–∫–ª—é—á–µ–Ω–∏–π –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≥–ª–æ–±–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ (`UseExceptionHandler`) –∏–ª–∏ —Ñ–∏–ª—å—Ç—Ä—ã –∏—Å–∫–ª—é—á–µ–Ω–∏–π.

------------------------------------------------------------------------

### 10. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Å—Ç–∏–ª—é –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤

1.  **–û–¥–∏–Ω –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä - –æ–¥–Ω–∞ —Å—É—â–Ω–æ—Å—Ç—å.**\
    –ü—Ä–∏–º–µ—Ä: `UsersController`, `BooksController`, `OrdersController`.

2.  **–°–æ–±–ª—é–¥–∞–π REST-–ø—Ä–∏–Ω—Ü–∏–ø—ã.**
- `GET` - —á—Ç–µ–Ω–∏–µ
- `POST` - —Å–æ–∑–¥–∞–Ω–∏–µ 
- `PUT` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
- `DELETE` - —É–¥–∞–ª–µ–Ω–∏–µ

3.  **–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –Ω–µ –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É.**\
    –û–Ω –ª–∏—à—å –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–∞–ø—Ä–æ—Å –∏ –≤—ã–∑—ã–≤–∞–µ—Ç —Å–µ—Ä–≤–∏—Å–Ω—ã–π —Å–ª–æ–π.

4.  **–ò—Å–ø–æ–ª—å–∑—É–π –º–æ–¥–µ–ª–∏ DTO** –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö.\
    –ù–µ –≤–æ–∑–≤—Ä–∞—â–∞–π –Ω–∞–ø—Ä—è–º—É—é —Å—É—â–Ω–æ—Å—Ç–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.

5.  **–í–æ–∑–≤—Ä–∞—â–∞–π –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –∫–æ–¥—ã –æ—Ç–≤–µ—Ç–∞.**\
    `201 Created` - –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏, `204 No Content` - –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏.

6.  **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π API —á–µ—Ä–µ–∑ Swagger.**\
    –≠—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ –≤–∏–∑—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã.

7.  **–ò—Å–ø–æ–ª—å–∑—É–π kebab-case** –≤ URL.\
    `/user-profiles` —á–∏—Ç–∞–µ—Ç—Å—è –ª—É—á—à–µ, —á–µ–º `/UserProfiles`.

8.  **–ù–µ —Å–æ–∑–¥–∞–≤–∞–π "—É–º–Ω—ã–µ" –º–∞—Ä—à—Ä—É—Ç—ã.**\
    –ü—É—Å—Ç—å API –±—É–¥–µ—Ç –ø—Ä–æ—Å—Ç—ã–º –∏ –ª–æ–≥–∏—á–Ω—ã–º.

9.  **–ü—Ä–æ–≤–µ—Ä—è–π –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.**\
    –í–∞–ª–∏–¥–∞—Ü–∏—è - –∫–ª—é—á –∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ–º—É API.

------------------------------------------------------------------------
