# –í–≤–µ–¥–µ–Ω–∏–µ –≤ ASP.NET Core (Web API)

------------------------------------------------------------------------

### 1. –ß—Ç–æ —Ç–∞–∫–æ–µ ASP.NET Core

ASP.NET Core - —ç—Ç–æ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–∏—Å–∞—Ç—å **–≤–µ–±-—Å–µ—Ä–≤–µ—Ä—ã**
–∏ **API** –Ω–∞ C#.\
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å API - —ç—Ç–æ –ø—Ä–æ–≥—Ä–∞–º–º–∞, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç **HTTP-–∑–∞–ø—Ä–æ—Å—ã** –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç
**HTTP-–æ—Ç–≤–µ—Ç—ã**.

üìò –ü—Ä–æ—â–µ –≥–æ–≤–æ—Ä—è:
> –ú—ã —Å–æ–∑–¥–∞—ë–º —Å–µ—Ä–≤–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π "—Ä–∞–∑–≥–æ–≤–∞—Ä–∏–≤–∞–µ—Ç" —Å –¥—Ä—É–≥–∏–º–∏
–ø—Ä–æ–≥—Ä–∞–º–º–∞–º–∏ —á–µ—Ä–µ–∑ –ò–Ω—Ç–µ—Ä–Ω–µ—Ç.

------------------------------------------------------------------------

### 2. –ß—Ç–æ —Ç–∞–∫–æ–µ HTTP-–∑–∞–ø—Ä–æ—Å –∏ HTTP-–æ—Ç–≤–µ—Ç

–ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —Å–∞–π—Ç–æ–≤ —Ä–∞–±–æ—Ç–∞—é—Ç –ø–æ –ø—Ä–æ—Ç–æ–∫–æ–ª—É **HTTP** - —ç—Ç–æ —Å–ø–æ—Å–æ–±, –∫–∞–∫ –∫–ª–∏–µ–Ω—Ç –∏
—Å–µ—Ä–≤–µ—Ä –æ–±–º–µ–Ω–∏–≤–∞—é—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏.

#### HTTP-–∑–∞–ø—Ä–æ—Å (—Ç–æ, —á—Ç–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–ª–∏–µ–Ω—Ç):

    GET /api/hello HTTP/1.1
    Host: localhost:5000
    Accept: text/plain

-   **GET** - —Ç–∏–ø –∑–∞–ø—Ä–æ—Å–∞ (–º–µ—Ç–æ–¥).
-   **/api/hello** - –∞–¥—Ä–µ—Å (–ø—É—Ç—å).
-   **Host** - –∫—É–¥–∞ –º—ã –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º.
-   **Accept** - —á—Ç–æ –æ–∂–∏–¥–∞–µ–º –≤ –æ—Ç–≤–µ—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, JSON).

#### HTTP-–æ—Ç–≤–µ—Ç (—Ç–æ, —á—Ç–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–µ—Ä–≤–µ—Ä):

    HTTP/1.1 200 OK
    Content-Type: text/plain; charset=utf-8

    "–ü—Ä–∏–≤–µ—Ç, –º–∏—Ä!"

-   **–°—Ç–∞—Ç—É—Å-–∫–æ–¥ (200 OK)** - —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.
-   **Content-Type** - —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö.
-   **–¢–µ–ª–æ –æ—Ç–≤–µ—Ç–∞** - –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ —Å–µ—Ä–≤–µ—Ä –≤–µ—Ä–Ω—É–ª.

------------------------------------------------------------------------

### 3. –û—Å–Ω–æ–≤–Ω—ã–µ HTTP-–º–µ—Ç–æ–¥—ã

–ú–µ—Ç–æ–¥|–ß—Ç–æ –¥–µ–ª–∞–µ—Ç|–ü—Ä–∏–º–µ—Ä
----------|-----------------|-----------------------------
**GET**| –ü–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ|"–î–∞–π —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π"
**POST**|–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ|"–î–æ–±–∞–≤—å –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"
**PUT**|–û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ|"–ò–∑–º–µ–Ω–∏ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"
**DELETE**|–£–¥–∞–ª–∏—Ç—å –¥–∞–Ω–Ω—ã–µ|"–£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"
------------------------------------------------------------------------

### 4. –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–¥—ã –æ—Ç–≤–µ—Ç–∞

–ö–æ–¥| –ù–∞–∑–≤–∞–Ω–∏–µ| –ß—Ç–æ –∑–Ω–∞—á–∏—Ç|
------------------------------- |---------------- |-------------------------
**200 OK**|–£—Å–ø–µ—Ö|–í—Å—ë —Ö–æ—Ä–æ—à–æ
**201 Created**| –°–æ–∑–¥–∞–Ω–æ|–û–±—ä–µ–∫—Ç —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω
**400 Bad Request** |–û—à–∏–±–∫–∞ –∫–ª–∏–µ–Ω—Ç–∞ |–ù–µ–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
**404 Not Found** |–ù–µ –Ω–∞–π–¥–µ–Ω–æ| –¢–∞–∫–æ–≥–æ —Ä–µ—Å—É—Ä—Å–∞ –Ω–µ—Ç
**500 Internal Server Error** |–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ |–ß—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫

> üí° –≠—Ç–∏ –∫–æ–¥—ã –ø–æ–º–æ–≥–∞—é—Ç –ø–æ–Ω—è—Ç—å, —á—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ - –≤—Å—ë –ª–∏ –ø—Ä–æ—à–ª–æ —É—Å–ø–µ—à–Ω–æ,
> –∏–ª–∏ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞.

------------------------------------------------------------------------

### 5. –°–æ–∑–¥–∞—ë–º –ø—Ä–æ–µ–∫—Ç Web API –≤ Rider

1.  –û—Ç–∫—Ä–æ–π **Rider ‚Üí File ‚Üí New Solution**
2.  –í—ã–±–µ—Ä–∏ **ASP.NET Core Web API**
3.  –£–∫–∞–∂–∏ –∏–º—è –ø—Ä–æ–µ–∫—Ç–∞: `MyFirstApi`
4.  –ù–∞–∂–º–∏ **Create**

------------------------------------------------------------------------

### 6. –ß—Ç–æ –µ—Å—Ç—å –≤ –ø—Ä–æ–µ–∫—Ç–µ

–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è —Ç—ã —É–≤–∏–¥–∏—à—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É:

    /Program.cs
    /appsettings.json

üìò –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª - **Program.cs**\
–ò–º–µ–Ω–Ω–æ —Å –Ω–µ–≥–æ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Ä–∞–±–æ—Ç–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

------------------------------------------------------------------------

### 7. –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Web API

–û—Ç–∫—Ä–æ–π `Program.cs` –∏ –ø–æ—Å–º–æ—Ç—Ä–∏:

```csharp
var builder = WebApplication.CreateBuilder(args);
builder.Services.AddControllers(); // –ø–æ–¥–∫–ª—é—á–∞–µ–º –ø–æ–¥–¥–µ—Ä–∂–∫—É –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤

var app = builder.Build();
app.MapControllers(); // –≥–æ–≤–æ—Ä–∏–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é –∏—Å–∫–∞—Ç—å –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã

app.Run();
```

------------------------------------------------------------------------

### 8. –°–æ–∑–¥–∞—ë–º —Å–≤–æ–π –ø–µ—Ä–≤—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä

–î–æ–±–∞–≤—å –Ω–æ–≤—ã–π —Ñ–∞–π–ª –≤ –ø–∞–ø–∫—É **Controllers** ‚Üí\
**HelloController.cs**

```csharp
using Microsoft.AspNetCore.Mvc;

namespace MyFirstApi.Controllers;

[ApiController]
[Route("api/[controller]")]
public class HelloController : ControllerBase
{
    [HttpGet]
    public IActionResult GetHello()
    {
        return Ok("–ü—Ä–∏–≤–µ—Ç! –≠—Ç–æ –º–æ–π –ø–µ—Ä–≤—ã–π API!");
    }

    [HttpGet("bad")]
    public IActionResult GetBadExample()
    {
        return BadRequest("–û—à–∏–±–∫–∞: –∑–∞–ø—Ä–æ—Å –Ω–µ–≤–µ—Ä–Ω—ã–π!");
    }

    [HttpGet("notfound")]
    public IActionResult GetNotFoundExample()
    {
        return NotFound("–î–∞–Ω–Ω—ã–µ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã!");
    }
}
```

üìò –û–±—ä—è—Å–Ω–µ–Ω–∏–µ:

–ö–æ–¥| –ß—Ç–æ –¥–µ–ª–∞–µ—Ç
------------------------------- |---------------------------------------------------
`[ApiController]`| —Å–æ–æ–±—â–∞–µ—Ç ASP.NET Core, —á—Ç–æ —ç—Ç–æ—Ç –∫–ª–∞—Å—Å - –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –¥–ª—è API
`[Route("api/[controller]")]` |–º–∞—Ä—à—Ä—É—Ç, –ø–æ –∫–æ—Ç–æ—Ä–æ–º—É –¥–æ—Å—Ç—É–ø–µ–Ω –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä (–Ω–∞–ø—Ä–∏–º–µ—Ä,`/api/hello`)
`[HttpGet]` |–≥–æ–≤–æ—Ä–∏—Ç, —á—Ç–æ –º–µ—Ç–æ–¥ —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ GET-–∑–∞–ø—Ä–æ—Å
`ControllerBase`|–±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è API-–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤
`Ok()`, `BadRequest()`,`NotFound()`| –º–µ—Ç–æ–¥—ã –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ —Å –Ω—É–∂–Ω—ã–º—Å—Ç–∞—Ç—É—Å–æ–º

### 9. –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É —Ä—É—á–µ–∫

–°–æ–∑–¥–∞–π —Ñ–∞–π–ª `requests.http` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ –∏ –¥–æ–±–∞–≤—å —Ç—É–¥–∞:

    ### Get –∑–∞–ø—Ä–æ—Å
    GET http://localhost:5000/api/hello

    ### Post –∑–∞–ø—Ä–æ—Å
    POST http://localhost:5000/api/test/

    {
        "name": "value",
        "age": 30
    }

    ### Put –∑–∞–ø—Ä–æ—Å
    PUT http://localhost:5000/api/test/5

    {
        "name": "value",
        "age": 30
    }

–¢–µ–ø–µ—Ä—å –ø—Ä–æ—Å—Ç–æ –Ω–∞–≤–µ–¥–∏ –∫—É—Ä—Å–æ—Ä –Ω–∞ —Å—Ç—Ä–æ–∫—É `GET ...`\
–∏ –Ω–∞–∂–º–∏ **‚ñ∂ Run Request** (—Å–ø—Ä–∞–≤–∞ –æ—Ç —Å—Ç—Ä–æ–∫–∏).\
Rider –ø–æ–∫–∞–∂–µ—Ç –æ—Ç–≤–µ—Ç –∏ —Å—Ç–∞—Ç—É—Å-–∫–æ–¥ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `200 OK`).

------------------------------------------------------------------------

### 10. –ß—Ç–æ –¥–µ–ª–∞–µ—Ç `IActionResult`

–ú–µ—Ç–æ–¥—ã –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ —á–∞—Å—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç —Ç–∏–ø **IActionResult**.\
–≠—Ç–æ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —Ç–∏–ø –¥–ª—è –≤—Å–µ—Ö HTTP-–æ—Ç–≤–µ—Ç–æ–≤.\
–û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–µ—Ä–Ω—É—Ç—å —Ä–∞–∑–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:
- `Ok()` ‚Üí 200
- `BadRequest()` ‚Üí 400
- `NotFound()` ‚Üí 404
- `Created()` ‚Üí 201
- `NoContent()` ‚Üí 204

–ü—Ä–∏–º–µ—Ä:

```csharp
[HttpGet("sum")]
public IActionResult GetSum(int a, int b)
{
    if (a < 0 || b < 0) {
        return BadRequest("–ß–∏—Å–ª–∞ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–º–∏!");
    }

    return Ok(a + b);
}
```

------------------------------------------------------------------------

### 11. –ö–∞–∫ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –æ—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞

–ö–æ–≥–¥–∞ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –≤—ã–∑—ã–≤–∞–µ—Ç `return Ok("–ü—Ä–∏–≤–µ—Ç!")`,\
—Å–µ—Ä–≤–µ—Ä —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç HTTP-–æ—Ç–≤–µ—Ç:

    HTTP/1.1 200 OK
    Content-Type: text/plain; charset=utf-8

    "–ü—Ä–∏–≤–µ—Ç!"

-   **–°—Ç–∞—Ç—É—Å** - `200 OK`
-   **–ó–∞–≥–æ–ª–æ–≤–æ–∫** - `Content-Type`
-   **–¢–µ–ª–æ (body)** - `"–ü—Ä–∏–≤–µ—Ç!"`

------------------------------------------------------------------------